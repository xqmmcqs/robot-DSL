用户管理
========

概述
----

系统采用用户名唯一标识每个用户，对于访客用户，连接时会给用户名后连接一个串以确保不同客户端的用户名不重复。

系统采用字典将用户名映射到每个用户对象，每个用户对象对应一个正在或者曾经连接到服务器的客户端，其中包含有用户状态和超时计时器等信息。

用户采用JWT鉴权，首次连接时用户会获取到唯一的JWT令牌，该JWT令牌永久有效，但是当用户登录或者注册成功时，会获取到新的令牌，原有的令牌立即作废。

由于需要记录用户闲置的时间，所以客户端需要定期向服务器发送echo消息，其中包含用户闲置的时间。对于每个用户有一个计时器，计时器超时会在用户一段时间内 *没有任何请求* 时触发，注意此处的概念与用户 *一段时间内闲置* 不同。

登录、注册导致用户名变化、用户到达结束状态，或者触发超时后会释放用户对象。

API
---

.. autoclass:: server.user_manage.User
   :members:
.. autoclass:: server.user_manage.UserManage
   :members:
